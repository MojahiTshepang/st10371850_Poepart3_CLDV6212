@model SleazyRetailers.Models.Upload

@{
    ViewData["Title"] = "Upload Document";
}

<h2><i class="fas fa-file-upload"></i> Upload Document</h2>
<hr />

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["ErrorMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<form asp-action="SubmitProof" asp-controller="Upload" enctype="multipart/form-data" method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="mb-3">
        <label for="FileToUpload" class="form-label">Submit Proof of Payment</label>
        <input type="file" class="form-control" id="FileToUpload" name="FileToUpload" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" required />
        <small class="form-text text-muted">Accepted formats: PDF, JPG, PNG, DOC, DOCX (Max size: 10MB)</small>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <label asp-for="RelatedOrderId" class="form-label">Enter related Order ID</label>
            <input asp-for="RelatedOrderId" class="form-control" />
        </div>
        <div class="col-md-6">
            <label asp-for="CustomerName" class="form-label">Customer Name (Optional)</label>
            <input asp-for="CustomerName" class="form-control" />
        </div>
    </div>

    <button type="submit" class="btn btn-primary"><i class="fas fa-upload"></i> Upload File</button>
    <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Back to Home</a>

    <div class="mt-4 p-3 bg-light rounded border">
        <h4>Upload Instructions:</h4>
        <ul class="list-unstyled">
            <li><i class="fas fa-check-circle text-success"></i> Select your **proof of payment** document.</li>
            <li><i class="fas fa-check-circle text-success"></i> File will be stored securely in **Azure Blob Storage** (Payment Proofs container).</li>
            <li><i class="fas fa-check-circle text-success"></i> A message will be sent to the **Azure Queue** (Order Processing) to initiate a background workflow.</li>
            <li><i class="fas fa-check-circle text-success"></i> You will receive a confirmation once upload is complete.</li>
        </ul>
    </div>
</form>

@section Scripts {

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}